

## Catatan ##

## v2.5.2 -- Penambahan fitur profil user -- 2022-06-10
    # issue
        - sebagai syarat ekspor BA diperlukan informasi tambahan semacam Nama Pejabat setempat & sekretariat

    ** Perbaharui Database
        - tambah kolom kategori_role setelah nm_role di tabel tb_roles
        - tambah kolom user_lembaga_id(int) setelah user_image di tabel dtks_users 
        - pindah kolom password setelah kolom user_lembaga_id di tabel dtks_users 
        - impor lembaga_profil
        - impor lembaga_kategori
        - tambah kode_kec(vharchar)(100) di tabel dtks_users 
        - buat view usulan dibulan ini 
            CREATE OR REPLACE VIEW dtks_usulan_view AS
                SELECT dtks_usulan22.du_id, dtks_usulan22.du_nik
            FROM 
                dtks_usulan22 
            WHERE 
                dtks_usulan22.created_at_year = year(now()) and dtks_usulan22.created_at_month = month(now());

    
---------------------------------------------------------------------------------------------------------------------------------------------------

## v2.6.0 -- Penambahan fitur impor CSV Report -- 2022-06-10
    # issue
        - hasil ekspor dari siks online tidak menampilkan nama, alamat, dll terusul.

    * solusi
        - mempermudah operator dalam menemukan nama, alamat dari NIK terusul.

    ** Permbaharuan Database 
        - tambah tabel dtks_csv_report
        - buat view join tabel dtks_csv_report (hasil ekspor siks online) & tabel dtks_usulan22

            CREATE OR REPLACE VIEW vw_csv_report AS
                SELECT cr_id, kecamatan, cr_nama_kec, kelurahan, cr_nama_desa, nokk, nama, cr_nama_lgkp, du_nik, alamat, rt, rw, program_bansos,
                cr_program_bansos, cr_hasil, cr_padan, cr_ket_vali, cr_ck_id, YEAR(cr_created_at) as tahun_upload, MONTH(cr_created_at) as bulan_upload, cr_created_by, cr_created_at
            FROM 
                dtks_csv_report
            INNER JOIN 
                dtks_usulan22 ON dtks_csv_report.cr_nik_usulan = dtks_usulan22.du_nik;


            ALTER 
                ALGORITHM=MERGE
            VIEW vw_csv_report AS
                SELECT cr_id, kecamatan, cr_nama_kec, kelurahan, cr_nama_desa, nokk, nama, cr_nama_lgkp, du_nik, alamat, rt, rw, program_bansos,
                cr_program_bansos, cr_hasil, cr_padan, cr_ket_vali, cr_ck_id, cr_created_by, cr_created_at
            FROM 
                dtks_csv_report
            INNER JOIN 
                dtks_usulan22 ON dtks_csv_report.cr_nik_usulan = dtks_usulan22.du_nik;


        - tambah tabel dtks_csv_ket dengan struktur: Terproses, Error, Tidak valid, Valid, Belum dipadankan dukcapil, Padan dukcapil, Tidak padan dukcapil
        - ubah struktur tabel dtks_csv_ket dengan ditambah cr_ck_id
---------------------------------------------------------------------------------------------------------------------------------------------------

## v2.7.0 -- Penambahan fitur dan Menu Perbaikan data Anomali -- 2022-06-17
    # issue
        - Perbaikan data anomali agar dapat di akses dan informasikan kepada user tk. RW

    * solusi
        - Janten kan pakenjeng-tangguh.id th akses na tiasa di filter dugika ka tingkat RW, Numawi siks online mah akses na kan dugika tingkat desa, numawi dijembatani ku pakenjeng-tangguh.id. 
        Teras Kasus nu ayeuna nuju di verivali th nya√©ta data anomali isina (tidak ada tanggal lahir, nama ibu, pekerjaan dsb). 
        Tiasa ke ketua RW verivali na dina pakenjeng-tangguh.id, ke eksekusi na ku operator desa kana siks.kemensos.go.id daripada kedah ngempel keun KK nu masyarakat, mending via aplikasi pakenjeng-tangguh.id.

    ** perbaikan Database
        - tambah tabel dtks_verivali_anomali
        dengan struktur :
                            va_id,
                            va_id_dtks,
                            va_nik,
                            va_nama,
                            va_nkk,
                            va_tmp_lhr,
                            va_tgl_lhr,
                            va_alamat,
                            va_provinsi,
                            va_kab,
                            va_kec,
                            va_desa,
                            va_jk,
                            va_ibu,
                            va_pekerjaan,
                            va_rw,
                            va_nama_anomali,
                            va_status,
                            va_creator,

        - buat view untuk tabel userinterface 
            CREATE OR REPLACE VIEW vw_verivali_anomali AS
                SELECT 
                    va_id,
                    db_id_dtks,
                    db_province,
                    db_regency,
                    db_district,
                    db_village,
                    db_alamat,
                    db_dusun,
                    db_rw,
                    va_rw,
                    db_rt,
                    db_nkk,
                    db_nik,
                    db_nama,
                    db_tgl_lahir,
                    db_tmp_lahir,
                    db_jenkel_id,
                    db_ibu_kandung,
                    va_pekerjaan,
                    va_nama_anomali,
                    va_ds_id,
                    va_status,
                    va_updated_at
                FROM 
                    ((dtks_bnba
                INNER JOIN 
                    dtks_verivali_anomali ON dtks_bnba.db_id_dtks = dtks_verivali_anomali.va_id_dtks)
                INNER JOIN
                    dtks_status ON dtks_verivali_anomali.va_ds_id = id_status);

        - tambah tabel tb_penduduk_pekerjaan
        - tambah tabel tb_ket_anomali
        - tambah tabel tb_status
---------------------------------------------------------------------------------------------------------------------------------------------------

## v2.7.1 -- Penambahan fitur dan Menu Perbaikan data Anomali -- 2022-06-17
    # bug tidak ada status anomali bahwa sudah meninggal atau belum
        - ubah tabel dtks_verivali_anomali dengan ditambah va_ds_id
            ALTER TABLE dtks_verivali_anomali
                ADD COLUMN va_ds_id INT DEFAULT 1 AFTER va_status;

                ALTER TABLE dtks_verivali_anomali
                MODIFY va_ds_id INT DEFAULT '1';

        - replace view vw_verivali_anomali 
            CREATE OR REPLACE VIEW vw_verivali_anomali AS
                SELECT 
                    va_id,
                    db_id_dtks,
                    db_province,
                    db_regency,
                    db_district,
                    db_village,
                    db_alamat,
                    db_dusun,
                    db_rw,
                    va_rw,
                    db_rt,
                    db_nkk,
                    db_nik,
                    db_nama,
                    db_tgl_lahir,
                    db_tmp_lahir,
                    db_jenkel_id,
                    db_ibu_kandung,
                    va_pekerjaan,
                    va_nama_anomali,
                    va_ds_id,
                    va_status,
                    va_updated_at
                FROM 
                    ((dtks_bnba
                INNER JOIN 
                    dtks_verivali_anomali ON dtks_bnba.db_id_dtks = dtks_verivali_anomali.va_id_dtks)
                INNER JOIN
                    dtks_status ON dtks_verivali_anomali.va_ds_id = id_status);

        - ubah tabel dtks_status, ditambah kolom ds_class
        - ubah tabel tb_ket_anomali, ditambah kolom sta_class
        - ubah tabel tb_status, ditambah kolom sta_class
        - ubah view vw_verivali_anomali
---------------------------------------------------------------------------------------------------------------------------------------------------

## v2.8.0 -- Penambahan fitur dan Menu PDTT -- 2022-06-22
    # issue
        - PM harus difoto dengan foto Geotagging,

    * solusi
        - Tambh fitur Geotagging ke aplikasi,
        - Dokumentasi PM tersimpan di database pakenjeng-tangguh.id,

    ** perbaikan Database
        - tambah tabel dtks_verivali_geo
        dengan struktur :
                            vg_id,
                            vg_nik,
                            vg_nama_lengkap,
                            vg_nkk,
                            vg_alamat,
                            vg_rw,
                            vg_rt,
                            vg_desa,
                            vg_kec,
                            vg_kab,
                            vg_prov,
                            vg_dbj_id1,
                            vg_dbj_id2,
                            vg_norek,
                            vg_source,
                            vg_fp,
                            vg_fr,
                            vg_lat,
                            vg_lang,
                            vg_ds_id,
                            vg_sta_id,
                            vg_created_by,
                            vg_created_at,
                            vg_updated_by,
                            vg_updated_at,

    # issue
        - ubah tab verivali anomali menjadi tabel verivali, proses verivali dan hasil verivali

    ** perbaikan tb_status insert data value sta_id = 2, sta_nama = Sukses

    # issue
        - ubah tabel sesuai data revisi 3.2.8
    ** perbaikan table dtks_verivali_geo tambah column no. vg_no_data, vg_nik_ktp, vg_nama_ktp, vg_fktp, vg_fkk, vg_terbukti, 
    ** tambah tabel tb_ket_temuan dengan struktur : tkt_id, tkt_num, tkt_ket 
    ---------------------------------------------------------------------------------------------------------------------------------------------------

## v2.8.1 -- Perbaikan Fitur Setting Web tingkat Kecamatan di Kabupaten Garut -- 2022-07-01
    
    # bug setting awal aplikasi untuk digunakan oleh Admin Kecamatan
        - ubah tabel dtks_users MODIFY kode_kab DEFAULT ke 32.05

    # tambah landing-page dengan fitur menampilkan cek usulan cpm
        - tambah tabel tb_bulan
---------------------------------------------------------------------------------------------------------------------------------------------------            

## v2.8.2 -- Penambahan fitur Verivali BNBA KESOS -- 2022-07-23

    # perbaikan tabel dtks_bnba tambah kolom db_tgl_kejadian, db_noreg_kejadian, db_tb_status setelah kolom db_status

## v2.8.3 -- Penambahan fitur Pengaturan Menu terintegrasi ke database
    # buat tabel baru dengan nama tb_menu
    # buat tabel baru dengan nama tb_version
    # perbaikan tabel dtks_status

---------------------------------------------------------------------------------------------------------------------------------------------------

## v2.8.4 -- Perbaikan Bug Profil Lembaga Admin Kecamatan & Ekspor BA PDTT -- 2022-07-24
    # template BA PDTT bagi Admin
    # perbaiki table dtks_status, keterangan Menolak menjadi Sudah Mampu/Menolak
    # perbaiki table dtks_users, tambah kolom jabatan_id int(11) setelah status
    # tambah tabel tb_jabatan
    # tambah tabel dtks_deadline

## v2.9.0 -- tambah fitur online user
    # tambah tabel tb_chatt
    # tambah tabel dtks_users_login

---------------------------------------------------------------------------------------------------------------------------------------------------

## v2.9.1 -- tambah fitur rekap pbi_nonaktif
    # tambah table dtks_pbi_nonaktif

---------------------------------------------------------------------------------------------------------------------------------------------------

## v2.10.0 -- tambah fitur / menu DKM (Daftar Keluarga Kemiskinan)
    # tambah tabel dtks_dkm

---------------------------------------------------------------------------------------------------------------------------------------------------

## v2.11.0 -- tambah fitur / proses usulan sukses / gagal
    # tambah field di tabel dtks_usulan22: ALTER TABLE `dtks_usulan22` ADD `du_proses` INT NULL DEFAULT NULL AFTER `hamil_tgl`;

---------------------------------------------------------------------------------------------------------------------------------------------------
## v2.12.0 -- penyesuaian versi SIKS-NG 0.8.19
    # tambah foto KTP & Rumah
        - tambah field baru di tabel dtks_usulan22: ALTER TABLE `dtks_usulan22` ADD `foto_identitas` VARCHAR(255) NULL DEFAULT NULL AFTER `shdk`;
        - tambah field baru di tabel dtks_usulan22: ALTER TABLE `dtks_usulan22` ADD `du_latitude` VARCHAR(255) NULL DEFAULT NULL AFTER `hamil_tgl`, ADD `du_longitude` VARCHAR(255) NULL DEFAULT NULL AFTER `du_latitude`;
        - tambah directory penyimpanan foto tersebut

---------------------------------------------------------------------------------------------------------------------------------------------------
## v2.13.0 -- distinct cari data
    # tambah table view dtks_usulan_view_nik sebagai alat bantu
        CREATE OR REPLACE VIEW dtks_usulan_view_nik AS
        SELECT DISTINCT du_nik
        FROM dtks_usulan22;

        CREATE OR REPLACE VIEW dtks_usulan_caridata AS
        SELECT dtks_usulan22.du_id, dtks_usulan22.du_nik, dtks_usulan22.program_bansos, dtks_usulan22.nokk, dtks_usulan22.nama, dtks_usulan22.tempat_lahir, dtks_usulan22.tanggal_lahir, dtks_usulan22.ibu_kandung, dtks_usulan22.jenis_kelamin, dtks_usulan22.jenis_pekerjaan, dtks_usulan22.status_kawin, dtks_usulan22.alamat, dtks_usulan22.rt, dtks_usulan22.rw, dtks_usulan22.provinsi, dtks_usulan22.kabupaten, dtks_usulan22.kecamatan, dtks_usulan22.kelurahan, dtks_usulan22.shdk, dtks_usulan22.foto_identitas, dtks_usulan22.foto_rumah, dtks_usulan22.disabil_status, dtks_usulan22.disabil_kode, dtks_usulan22.hamil_status, dtks_usulan22.hamil_tgl, dtks_usulan22.du_latitude, dtks_usulan22.du_longitude, dtks_usulan22.du_proses, dtks_usulan22.created_at, dtks_usulan22.created_at_year, dtks_usulan22.created_at_month, dtks_usulan22.created_by, dtks_usulan22.updated_at, dtks_usulan22.updated_by
        FROM dtks_usulan22
        JOIN dtks_usulan_view_nik ON dtks_usulan22.du_nik=dtks_usulan_view_nik.du_nik;

        CREATE OR REPLACE VIEW dtks_usulan_caridata AS
        SELECT DISTINCT dtks_usulan22.du_nik, dtks_usulan22.program_bansos, dtks_usulan22.nokk, dtks_usulan22.nama, dtks_usulan22.tempat_lahir, dtks_usulan22.tanggal_lahir, dtks_usulan22.ibu_kandung, dtks_usulan22.jenis_kelamin, dtks_usulan22.jenis_pekerjaan, dtks_usulan22.status_kawin, dtks_usulan22.alamat, dtks_usulan22.rt, dtks_usulan22.rw, dtks_usulan22.provinsi, dtks_usulan22.kabupaten, dtks_usulan22.kecamatan, dtks_usulan22.kelurahan, dtks_usulan22.shdk
        FROM dtks_usulan22
        JOIN dtks_usulan_view_nik ON dtks_usulan22.du_nik=dtks_usulan_view_nik.du_nik;

        3205336606740001

        SET GLOBAL sql_mode=(SELECT REPLACE(@@sql_mode,'ONLY_FULL_GROUP_BY',''));
        CREATE OR REPLACE VIEW dtks_usulan_caridata AS
        SELECT COUNT(dtks_usulan22.du_nik) AS rc, dtks_usulan22.du_id, dtks_usulan22.du_nik, dtks_usulan22.program_bansos, dtks_usulan22.nokk, dtks_usulan22.nama, dtks_usulan22.tempat_lahir, dtks_usulan22.tanggal_lahir, dtks_usulan22.ibu_kandung, dtks_usulan22.jenis_kelamin, dtks_usulan22.jenis_pekerjaan, dtks_usulan22.status_kawin, dtks_usulan22.alamat, dtks_usulan22.rt, dtks_usulan22.rw, dtks_usulan22.provinsi, dtks_usulan22.kabupaten, dtks_usulan22.kecamatan, dtks_usulan22.kelurahan, dtks_usulan22.shdk, dtks_usulan22.foto_identitas, dtks_usulan22.foto_rumah, dtks_usulan22.disabil_status, dtks_usulan22.disabil_kode, dtks_usulan22.hamil_status, dtks_usulan22.hamil_tgl, dtks_usulan22.du_latitude, dtks_usulan22.du_longitude, dtks_usulan22.du_proses, dtks_usulan22.created_at, dtks_usulan22.created_at_year, dtks_usulan22.created_at_month, dtks_usulan22.created_by, dtks_usulan22.updated_at, dtks_usulan22.updated_by
        FROM dtks_usulan22
        GROUP BY dtks_usulan22.du_nik;

        SET GLOBAL sql_mode=(SELECT REPLACE(@@sql_mode,'ONLY_FULL_GROUP_BY',''));
        
        CREATE OR REPLACE VIEW dtks_usulan_caridata AS
        SELECT * FROM dtks_usulan22
        WHERE (du_nik,du_id) 
            IN (SELECT du_nik, MAX(du_id) FROM dtks_usulan22 GROUP BY du_nik)
        GROUP BY dtks_usulan22.du_nik ORDER BY du_id ASC;

---------------------------------------------------------------------------------------------------------------------------------------------------
## v2.13.1 -- start date and end date usulan oleh super admin dari web
    # perbaikan tabel dtks_deadline, 
        ubah field dd_waktu menjadi dd_waktu_start 
        tambah field dd_waktu_end
        tambah field dd_role
        
---------------------------------------------------------------------------------------------------------------------------------------------------
## v2.13.2 -- penyesuaian SIKS-NG versi 0.8.74
    # tambah form survey kriteria
        sk0 = Apakah memiliki tempat tinggal sendiri?
        sk1 = Apakah pernah khawatir tidak makan atau pernah tidak dalam setahun terakhir?
        sk2 = Apakah ada pengeluaran untuk pakaian selama 1 (satu) tahun terakhir?
        sk3 = Apakah tempat tinggal sebagian besar berdinding bambu, kawat, papan, kayu, terpal, kardus, tembok tanpa plester, rumbia, atau seng?
        sk4 = Apakah sumber penerangan berasal dari listrik 450 watt?
        sk5 = Apakah kepala keluarga atau pengurus keluarga masih bekerja?
        sk6 = Apakah pengeluaran kebutuhan makan lebih besar dari setengah total pengeluaran?
        sk7 = Apakah tempat tinggal sebagian besar berlantai tanah dan/atau plesteran?
        sk8 = Apakah tempat tinggal terdapat jamban sendiri?

        ALTER TABLE `dtks_usulan22` ADD `sk0` INT(3) NULL DEFAULT '0' AFTER `du_longitude`, ADD `sk1` INT(3) NULL DEFAULT '0' AFTER `sk0`, ADD `sk2` INT(3) NULL DEFAULT '0' AFTER `sk1`, ADD `sk3` INT(3) NULL DEFAULT '0' AFTER `sk2`, ADD `sk4` INT(3) NULL DEFAULT '0' AFTER `sk3`, ADD `sk5` INT(3) NULL DEFAULT '0' AFTER `sk4`, ADD `sk6` INT(3) NULL DEFAULT '0' AFTER `sk5`, ADD `sk7` INT(3) NULL DEFAULT '0' AFTER `sk6`, ADD `sk8` INT(3) NULL DEFAULT '0' AFTER `sk7`;

        <div class="container modaledit-awal">
            <div class="modal" id="exampleModal" aria-labelledby="exampleModalLabel" aria-hidden="true" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content">
                        <div class="modal-header modal-header-warning">
                            <img src="<?= logoApp(); ?>" alt="<?= nameApp(); ?> Logo" class="brand-image" style="width:30px; margin-right: auto">
                            <h5 class="modal-title" id="exampleModalLabel"><?= $title; ?> - Data Individu</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-12 col-sm-6">
                                    <div class="form-group row nopadding" hidden>
                                        <label class="col-4 col-sm-4 col-form-label" for="id">ID</label>
                                        <div class="col-8 col-sm-8">
                                            <input type="text" name="id" id="id" class="form-control form-control-sm" value="<?= $id; ?>" autofocus>
                                            <div class="invalid-feedback errorid"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="nik">NIK</label>
                                        <div class="col-8 col-sm-8">
                                            <input type="number" name="nik" id="nik" class="form-control form-control-sm" value="<?= $du_nik; ?>" autocomplete="off" <?= $user > 3 ? 'readonly="on"' : ''; ?>>
                                            <div class="invalid-feedback errornik"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="nama">Nama</label>
                                        <div class="col-8 col-sm-8">
                                            <input type="text" name="nama" id="nama" class="form-control form-control-sm" value="<?= $nama; ?>">
                                            <div class="invalid-feedback errornama"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="nokk">No. KK</label>
                                        <div class="col-8 col-sm-8">
                                            <input type="number" name="nokk" id="nokk" class="form-control form-control-sm" value="<?= $nokk; ?>" autocomplete="on">
                                            <div class="invalid-feedback errornokk"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="tempat_lahir">Tempat Lahir</label>
                                        <div class="col-8 col-sm-8">
                                            <input type="text" name="tempat_lahir" id="tempat_lahir" class="form-control form-control-sm" value="<?= $tempat_lahir; ?>">
                                            <div class="invalid-feedback errortempat_lahir"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="tanggal_lahir">Tgl Lahir</label>
                                        <div class="col-8 col-sm-8">
                                            <input type="date" name="tanggal_lahir" id="tanggal_lahir" class="form-control form-control-sm" value="<?= $tanggal_lahir; ?>">
                                            <div class="invalid-feedback errortanggal_lahir"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="ibu_kandung">Ibu Kandung</label>
                                        <div class="col-8 col-sm-8">
                                            <input type="text" name="ibu_kandung" id="ibu_kandung" class="form-control form-control-sm" value="<?= $ibu_kandung; ?>">
                                            <div class="invalid-feedback erroribu_kandung"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="jenis_kelamin">Jenis Kelamin</label>
                                        <div class="col-8 col-sm-8">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" <?= $jenis_kelamin == '1' ? 'checked' : ''; ?> value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Laki-Laki </label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" <?= $jenis_kelamin == '2' ? 'checked' : ''; ?> value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Perempuan </label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding" id="status_hamil_div" style="display: none">
                                        <label class="col-4 col-sm-4 col-form-label" for="status_hamil">Status Hamil</label>
                                        <div class="col-8 col-sm-8">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-YaHamil" name="status_hamil" <?= $status_hamil == 1 ? 'checked' : ''; ?> value="1" />
                                                <label for="chk-YaHamil" class="form-check-label"> Ya </label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-TidakHamil" name="status_hamil" <?= $status_hamil == 2 ? 'checked' : ''; ?> value="2" />
                                                <label for="chk-TidakHamil" class="form-check-label"> Tidak </label>
                                            </div>
                                            <div class="invalid-feedback errorstatus_hamil"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding" id="tgl_hamil_div" style="display: none;">
                                        <label class="col-4 col-sm-4 col-form-label" for="tgl_hamil">Tgl Mulai Hamil</label>
                                        <div class="col-8 col-sm-8">
                                            <input type="date" name="tgl_hamil" id="tgl_hamil" class="form-control form-control-sm" value="<?= $tgl_hamil; ?>">
                                            <div class="invalid-feedback errortgl_hamil"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="jenis_pekerjaan">Pekerjaan</label>
                                        <div class="col-8 col-sm-8">
                                            <select id="jenis_pekerjaan" name="jenis_pekerjaan" class="form-select form-select-sm">
                                                <option value="">-- Pilih Jenis Pekerjaan --</option>
                                                <?php foreach ($pekerjaan as $row) { ?>
                                                    <option <?php if ($jenis_pekerjaan == $row['idPekerjaan']) {
                                                                echo 'selected';
                                                            } ?> value="<?= $row['idPekerjaan'] ?>"> <?php echo $row['JenisPekerjaan']; ?></option>
                                                <?php } ?>
                                            </select>
                                            <div class="invalid-feedback errorjenis_pekerjaan"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="status_kawin">Status</label>
                                        <div class="col-8 col-sm-8">
                                            <select id="status_kawin" name="status_kawin" class="form-select form-select-sm">
                                                <option value="">-- Pilih Status Perkawinan --</option>
                                                <?php foreach ($statusKawin as $row) { ?>
                                                    <option <?php if ($status_kawin == $row['idStatus']) {
                                                                echo 'selected';
                                                            } ?> value="<?= $row['idStatus'] ?>"> <?php echo $row['StatusKawin']; ?></option>
                                                <?php } ?>
                                            </select>
                                            <div class="invalid-feedback errorstatus_kawin"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6">
                                    <div class="form-group row nopadding" <?php if ($user != 1) {
                                                                                echo 'hidden';
                                                                            } ?>>
                                        <label class="col-4 col-sm-4 col-form-label" for="kelurahan">Desa/Kelurahan</label>
                                        <div class="col-8 col-sm-8">
                                            <select id="kelurahan" name="kelurahan" class="form-select form-select-sm">
                                                <option value="">-- Pilih Desa / Kelurahan --</option>
                                                <?php foreach ($desa as $row) { ?>
                                                    <option <?php if ($desa_id == $row['id']) {
                                                                echo 'selected';
                                                            } ?> value="<?= $row['id'] ?>"> <?php echo $row['name']; ?></option>
                                                <?php } ?>
                                            </select>
                                            <div class="invalid-feedback errorkelurahan"></div>
                                        </div>
                                    </div>

                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="alamat">Alamat</label>
                                        <div class="col-8 col-sm-8">
                                            <input type="text" name="alamat" id="alamat" class="form-control form-control-sm" value="<?= $alamat; ?>">
                                            <div class="invalid-feedback erroralamat"></div>
                                        </div>
                                    </div>

                                    <div class="form-group row nopadding" <?php if ($user > 3) {
                                                                                echo 'hidden';
                                                                            } ?>>
                                        <label class="col-4 col-sm-4 col-form-label" for="datarw">No. RW</label>
                                        <div class="col-8 col-sm-8">
                                            <select id="datarw" name="datarw" class="form-select form-select-sm">
                                                <option value="">-- Pilih RW --</option>
                                                <?php foreach ($rw as $row) { ?>
                                                    <option <?php if ($datarw == $row['no_rw']) {
                                                                echo 'selected';
                                                            } ?> value="<?= $row['no_rw'] ?>"> <?php echo $row['no_rw']; ?></option>
                                                <?php } ?>
                                            </select>
                                            <div class="invalid-feedback errordatarw"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="datart">No. RT</label>
                                        <div class="col-8 col-sm-8">
                                            <select id="datart" name="datart" class="form-select form-select-sm">
                                                <option value="">-- Pilih RT --</option>
                                                <?php foreach ($rt as $row) { ?>
                                                    <option <?php if ($datart == $row['no_rt']) {
                                                                echo 'selected';
                                                            } ?> value="<?= $row['no_rt'] ?>"> <?php echo $row['no_rt']; ?></option>
                                                <?php } ?>
                                            </select>
                                            <div class="invalid-feedback errordatart"></div>
                                        </div>
                                    </div>

                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="shdk">SHDK</label>
                                        <div class="col-8 col-sm-8">
                                            <select id="shdk" name="shdk" class="form-select form-select-sm">
                                                <option value="">-- Status Hubungan dalam Keluarga --</option>
                                                <?php foreach ($shdk as $row) { ?>
                                                    <option <?php if ($stahub == $row['id']) {
                                                                echo 'selected';
                                                            } ?> value="<?= $row['id']; ?>"><?= $row['jenis_shdk']; ?></option>
                                                <?php } ?>
                                            </select>
                                            <div class="invalid-feedback errorShdk"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding">
                                        <label class="col-4 col-sm-4 col-form-label" for="databansos">Program</label>
                                        <div class="col-8 col-sm-8">
                                            <select id="databansos" name="databansos" class="form-select form-select-sm">
                                                <option value="">-- Pilih Program --</option>
                                                <?php foreach ($bansos as $row) { ?>
                                                    <option <?php if ($databansos == $row['dbj_id']) {
                                                                echo 'selected';
                                                            } ?> value="<?= $row['dbj_id'] ?>"> <?php echo $row['dbj_ket_bansos']; ?></option>
                                                <?php } ?>
                                            </select>
                                            <div class="invalid-feedback errordatabansos"></div>
                                        </div>
                                    </div>

                                    <div class="form-group row nopadding">
                                        <label for="disabil_status" class="col-4 col-form-label">Disabilitas</label>
                                        <div class="col-8 col-sm-8">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Yes" name="disabil_status" <?= $disabil_status == 1 ? 'checked' : ''; ?> value="1" />
                                                <label for="chk-Yes" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-No" name="disabil_status" <?= $disabil_status == 2 ? 'checked' : ''; ?> value="2" />
                                                <label for="chk-No" class="form-check-label"> Tidak</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row nopadding" id="disabil_jenis_div" style="display: none">
                                        <label for="disabil_jenis" class="col-4 col-form-label">Jenis Disabilitas</label>
                                        <div class="col-8 col-sm-8">
                                            <select id="disabil_jenis" name="disabil_jenis" class="form-select form-select-sm">
                                                <option value="">-- Pilih Jenis Disabilitas --</option>
                                                <?php foreach ($DisabilitasJenisModel as $row) { ?>
                                                    <option <?= $disabil_jenis == $row['dj_id'] ? 'selected' : ''; ?> value="<?= $row['dj_id'] ?>"> <?php echo $row['dj_keterangan']; ?></option>
                                                <?php } ?>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12 col-12 mt-2">
                                    <label class="label-center mt-2">Dokumen</label>
                                    <div class="form-group row nopadding">
                                        <div class="col-6 col-sm-6 mb-2">
                                            <a download="<?= $du_foto_identitas; ?>" href="<?= usulan_foto($du_foto_identitas, 'foto_identitas'); ?>">
                                                <img class="img-preview-id" src="<?= usulan_foto($du_foto_identitas, 'foto_identitas'); ?>" style="width: 30px; height: 40px; border-radius: 2px;">
                                            </a>
                                            <br>
                                            <label for="du_foto_identitas">Foto KTP/KK/KIA/AKL</label>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text"><i class="fas fa-address-card"></i></span>
                                                </div>
                                                <input type="file" class="form-control" spellcheck="false" name="du_foto_identitas" id="du_foto_identitas" onchange="previewImgId()" accept="image/*" capture />
                                            </div>
                                        </div>
                                        <div class="invalid-feedback errordu_foto_identitas"></div>
                                        <div class="col-6 col-sm-6 mb-2">
                                            <a download="<?= $du_foto_rumah; ?>" href="<?= usulan_foto($du_foto_rumah, 'foto_rumah'); ?>">
                                                <img class="img-preview-rmh" src="<?= usulan_foto($du_foto_rumah, 'foto_rumah'); ?>" style="width: 30px; height: 40px; border-radius: 2px;">
                                            </a>
                                            <br>
                                            <label for="du_foto_rumah">Foto Rumah</label>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text"><i class="fa fa-home"></i></span>
                                                </div>
                                                <input type="file" class="form-control" spellcheck="false" name="du_foto_rumah" id="du_foto_rumah" onchange="previewImgRmh()" accept="image/*" capture />
                                            </div>
                                        </div>
                                        <div class="invalid-feedback errordu_foto_rumah"></div>
                                    </div>
                                </div>
                                <div class="col-sm-12 col-12 mt-2">
                                    <label class="label-center mt-2">Titik Koordinat</label>
                                    <div class="form-group row nopadding">
                                        <div class="col-sm-2 col-2">
                                            <button type="button" class="btn btn-primary" onclick="getLocation()"><i class="fas fa-map-marker-alt"></i></button>
                                        </div>
                                        <div class="col-sm-5 col-5">
                                            <input type="text" class="form-control mb-2" placeholder="Latitude" spellcheck="false" id="latitude" name="du_latitude" value="<?= $du_latitude; ?>" readonly required>
                                            <div class="invalid-feedback errordu_latitude"></div>
                                        </div>
                                        <div class="col-sm-5 col-5">
                                            <input type="text" class="form-control mb-2" placeholder="Longitude" spellcheck="false" id="longitude" name="du_longitude" value="<?= $du_longitude; ?>" readonly required>
                                            <div class="invalid-feedback errordu_longitude"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer mt-3">
                            <button class="btn btn-secondary" data-bs-target="#exampleModaldua" data-bs-toggle="modal" data-bs-dismiss="modal">Selanjutnya</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="exampleModaldua" aria-hidden="true" aria-labelledby="exampleModalLabel2" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content">
                        <div class="modal-header modal-header-warning">
                            <img src="<?= logoApp(); ?>" alt="<?= nameApp(); ?> Logo" class="brand-image" style="width:30px; margin-right: auto">
                            <h5 class="modal-title" id="exampleModalLabel2"><?= $title; ?> - Survey Kriteria</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <!-- Hide this modal and show the first with the button below. -->
                            <div class="row">
                                <div class="col-12 col-sm-6">
                                    <div class="form-group row">
                                        <label class="col-10 col-form-label" for="jenis_kelamin">Apakah memiliki tempat tinggal sendiri?</label>
                                        <div class="col-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Tidak</label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-10 col-form-label" for="jenis_kelamin">Apakah pernah khawatir tidak makan atau pernah tidak dalam setahun terakhir?</label>
                                        <div class="col-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Tidak</label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-10 col-form-label" for="jenis_kelamin">Apakah ada pengeluaran untuk pakaian selama 1 (satu) tahun terakhir?</label>
                                        <div class="col-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Tidak</label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-10 col-form-label" for="jenis_kelamin">Apakah tempat tinggal sebagian besar berdinding bambu, kawat, papan, kayu, terpal, kardus, tembok tanpa plester, rumbia, atau seng?</label>
                                        <div class="col-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Tidak</label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-10 col-form-label" for="jenis_kelamin">Apakah sumber penerangan berasal dari listrik 450 watt?</label>
                                        <div class="col-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Tidak</label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-6">
                                    <div class="form-group row">
                                        <label class="col-10 col-form-label" for="jenis_kelamin">Apakah kepala keluarga atau pengurus keluarga masih bekerja?</label>
                                        <div class="col-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Tidak</label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-10 col-form-label" for="jenis_kelamin">Apakah pengeluaran kebutuhan makan lebih besar dari setengah total pengeluaran?</label>
                                        <div class="col-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Tidak</label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-10 col-form-label" for="jenis_kelamin">Apakah tempat tinggal sebagian besar berlantai tanah dan/atau plesteran?</label>
                                        <div class="col-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Tidak</label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-10 col-form-label" for="jenis_kelamin">Apakah tempat tinggal terdapat jamban sendiri?</label>
                                        <div class="col-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Lk" name="jenis_kelamin" value="1" />
                                                <label for="chk-Lk" class="form-check-label"> Ya</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="chk-Pr" name="jenis_kelamin" value="2" />
                                                <label for="chk-Pr" class="form-check-label"> Tidak</label>
                                            </div>
                                            <div class="invalid-feedback errorjenis_kelamin"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div <?= $user > 3 ? ' hidden' : ''; ?>>
                            <hr>
                            <div class="row">
                                <div class="col-12 d-flex justify-content-center">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input larger" type="checkbox" id="proses" name="du_proses" <?= $du_proses == '1' ? 'checked' : ''; ?> value="1" />
                                    </div>
                                    <label for="proses" class="form-check-label">PADAN </label>
                                    <div class="invalid-feedback errordu_proses"></div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer mt-3 justify-content-between">
                            <button class="btn btn-success" data-bs-target="#exampleModal" data-bs-toggle="modal" data-bs-dismiss="modal">Sebelumnya</button>
                            <input type="datetime-local" name="updated_at" id="" value="<?= date('Y-m-d H:i:s'); ?>" hidden>
                            <button type="submit" class="btn btn-warning btnSimpan">Update</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>